<html>
  <head></head>
  <body>
    <h1>svg foreignObject to embed html</h1>

    
<img src="image.svg"   crossorigin="anonymous" id="elementToCapture">


    <button id="saveButton">Save as PNG</button>

    <script>
      // Function to capture and save the HTML element as a PNG image
      function saveAsPNG() {
	// Get a reference to the HTML element you want to capture
	const elementToCapture = document.getElementById('elementToCapture');
    
	// Create a new canvas element
	const canvas = document.createElement('canvas');
	const ctx = canvas.getContext('2d');
    
	// Create an HTMLImageElement to render the element's content
	//const img = new Image();
    
	// Add an onload event to ensure the image is fully loaded
	//img.onload = function () {
	  // Set the canvas dimensions to match the element's dimensions
	//   canvas.width = elementToCapture.clientWidth;
	//   canvas.height = elementToCapture.clientHeight;

	    // Calculate the dimensions for the canvas to achieve 300 DPI
	const dpi = 300;
	const scaleFactor = dpi / 96; // 96 DPI is the standard screen resolution
	const canvasWidth = elementToCapture.clientWidth * scaleFactor;
	const canvasHeight = elementToCapture.clientHeight * scaleFactor;
	
    	// Set the canvas dimensions for 300 DPI
	canvas.width = canvasWidth;
	canvas.height = canvasHeight;
	canvas.style.width = `${elementToCapture.clientWidth}px`;
	canvas.style.height = `${elementToCapture.clientHeight}px`;
    
	// Scale the context to match the DPI
	ctx.scale(scaleFactor, scaleFactor);

	// Draw the image (element's content) on the canvas
	ctx.drawImage(elementToCapture, 0, 0);

	// Convert the canvas content to a data URL (PNG format)
	const dataURL = canvas.toDataURL('image/png');

	// Create a link element to download the PNG image
	const downloadLink = document.createElement('a');
	downloadLink.href = dataURL;
	downloadLink.download = 'element.png'; // Specify the filename

	// Trigger a click event on the download link to start the download
	downloadLink.click();
	//};
    
      }
    
      // Attach the saveAsPNG function to a button click event
      const saveButton = document.getElementById('saveButton');
      saveButton.addEventListener('click', saveAsPNG);
    </script>



</body></html>